<!DOCTYPE HTML>
<html>
  <head>
  <meta charset="utf-8">
  <meta lang="en">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Doug Skinner</title>
  <link rel="shortcut icon" href="/img/favicon.ico" />

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link href="/static/css/custom.css" rel="stylesheet">
  <link href="/assets/main.css" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="/static/js/custom.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-97386400-1', 'auto');
      ga('send', 'pageview');
  </script>
</head>

  <body>
    <div id="wrapper">
      <div class="hero">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-10 col-lg-8 col-xl-6 mx-auto">
        <h1 class="display-4 text-center">Doug Skinner</h1>
        <h1 class="display-5 text-center">Programmer, Photographer, Writer</h1>
      </div>
    </div>
  </div>
</div>

      <nav class="navbar fixed-top navbar-expand-md navbar-light bg-light">
  <a class="navbar-brand" href="/">DS</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto text-center">
      <li class="nav-item">
        <button id="mode_toggle" class="btn btn-light" data-mode="light">Light Mode</button>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto text-center">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about.html">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/photos.html">Photos</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/projects.html">Projects</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/writings.html">Writings</a>
      </li>
    </ul>
  </div>
</nav>

      <div class="container">
        <div class="row content">
  <div class="page-header col-12">
    <h2 class="text-center">All Posts</h2>
  </div>
  <div class="col-12 col-md-4 sidebar">
    <h3 class="text-center">Categories</h3>
    <ul class="list-unstyled">
      <li>
        <button class="tag_button btn All btn-primary" id="All">
          All <span class="badge badge-pill"> 36 </span>
        </button>
      </li>
      
        
        
        <li>
          <button class="btn btn-outline-primary tag_button Development" id="Development">
            Development <span class="badge badge-pill"> 21 </span>
          </button>
        </li>
      
        
        
        <li>
          <button class="btn btn-outline-primary tag_button Thoughts" id="Thoughts">
            Thoughts <span class="badge badge-pill"> 6 </span>
          </button>
        </li>
      
        
        
        <li>
          <button class="btn btn-outline-primary tag_button Reading" id="Reading">
            Reading <span class="badge badge-pill"> 7 </span>
          </button>
        </li>
      
        
        
        <li>
          <button class="btn btn-outline-primary tag_button Design" id="Design">
            Design <span class="badge badge-pill"> 1 </span>
          </button>
        </li>
      
        
        
        <li>
          <button class="btn btn-outline-primary tag_button Photography" id="Photography">
            Photography <span class="badge badge-pill"> 1 </span>
          </button>
        </li>
      
    </ul>
  </div>
  <div class="col-12 col-md-8" style="">
    <div class="search">
      <form>
        <div class="row">
          <div class="col-9">
            <input id="search-box" type="text" class="form-control" placeholder="Search Term Here">
          </div>
          <div class="col-3">
            <button class="btn btn-outline-success" type="button">Search</button>
          </div>
        </div>
      </form>
    </div>
    <div class="row">
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/pearls.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Tim Mossholder on Pexels">
              <div class="card-body">
                <h5 class="card-title text-left">Programming Pearls, Day Two<br><small class="text-info">Posted: April 11, 2018</small></h5>
                <div class="card-text container">
                  Continuing my journey, here’s the problem for the day: <em>How would you implement bit vectors using bitwise logical operations?</em>


                </div>
                <div hidden>
                  <p>Continuing my journey, here’s the problem for the day: <em>How would you implement bit vectors using bitwise logical operations?</em></p>

<p>So, here’s my solution to the problem, which works wonderfully:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">bitwise_shift_left</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">bitwise_shift_right</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">bitwise_and</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&amp;</span> <span class="n">y</span>

<span class="k">def</span> <span class="nf">bitwise_or</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">|</span> <span class="n">y</span></code></pre></figure>


                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/04/11/Programming-Pearls-Day-2.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/pearls.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Tim Mossholder on Pexels">
              <div class="card-body">
                <h5 class="card-title text-left">Programming Pearls, Day One<br><small class="text-info">Posted: April 10, 2018</small></h5>
                <div class="card-text container">
                  Today starts a journey, that if completed will take quite a long time. At the end of it, I hope to be a better programmer through hours of thinking, reading, and programming. The pathway of this journey is that of the book Programming Pearls, with one small caveat. I will...
                </div>
                <div hidden>
                  <p>Today starts a journey, that if completed will take quite a long time. At the
end of it, I hope to be a better programmer through hours of thinking, reading,
and programming. The pathway of this journey is that of the book Programming
Pearls, with one small caveat. I will be doing all of the code in Python, to
help myself work towards becoming a better python programmer.</p>

<p>Each day I will be doing one problem from the book. Some are easier than others,
but even the easiest will still take at least half an hour. So, to get on to it,
the text of the first problem is as follow:</p>

<p><em>If memory were not scarce, how would you implement a sort in a language with
libraries for representing and sorting sets?</em></p>

<p>For a bit of context, the original problem was that of sorting roughly a million
numbers in a space where memory was extremely limited, and execution time was
critical. The author eventually reached the conclusion that representing the
input numbers as a bitmap was the best way to do so, and these questions are
extensions of that problem.</p>

<p>So, here’s my solution to the problem, which works wonderfully:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">sort_tel_numbers</span><span class="p">():</span>
    <span class="n">numbers_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'numbers.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">numbers_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="n">in_nums</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c"># each line only contains one seven digit number, per the column</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">in_nums</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>

    <span class="n">output</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">in_nums</span><span class="p">)</span>

    <span class="n">output_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'out_numbers.txt'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">output</span><span class="p">:</span>
        <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">+</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'start time {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">())</span>
    <span class="n">sort_tel_numbers</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">'end time {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">())</span></code></pre></figure>


                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/04/10/Programming-Pearls-Day-1.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/cryptography.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Markus Spiske on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Adding Custom Search To Your Site<br><small class="text-info">Posted: April 05, 2018</small></h5>
                <div class="card-text container">
                  So this week I decided to add a search form to my writings page, as I was getting pretty tired of scrolling through all of my posts to find certain things, and I thought that it would be interesting to share. To make the following work on your own site,...
                </div>
                <div hidden>
                  <p>So this week I decided to add a search form to my writings page, as I was getting pretty tired of scrolling through all of my posts to find certain things, and I thought that it would be interesting to share. To make the following work on your own site, it will be easiest if you are using the same technologies that I am Bootstrap, JQuery, and Jekyll. The instructions can be modified for other tech, but that’s something that you’ll have to figure out.</p>

<p>To start, we need to first add a search form. The code that does this, ripped straight from my site, is the following:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form&gt;</span>
     <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-9"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"search-box"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Search Term Here"</span><span class="nt">&gt;</span>
	    <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-3"</span><span class="nt">&gt;</span>
	    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-outline-success"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>Search<span class="nt">&lt;/button&gt;</span>
	    <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/div&gt;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Notice that the button has a type of button, which means that it does not work to submit the form. In all honesty, the button is useless but makes the search bar look better in my opinion. Next we have the css to just add some padding to our search bar:</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.search</span> <span class="p">{</span>
  <span class="nl">padding-bottom</span><span class="p">:</span> <span class="m">1em</span><span class="p">;</span>
  <span class="nl">padding-right</span><span class="p">:</span> <span class="m">1em</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Very simple, but helps keep the search bar from touching either the edge of the browser on mobile or the top of the first post. The next bit is two parts inside your listing of all posts. The first is to add a class to each card, in my case <code class="highlighter-rouge">.text-to-search</code>, and then having the following snippet somewhere in the card:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">hidden</span><span class="nt">&gt;</span>
  {.{ post.content }} // Without the dot, but otherwise Jekyll eats it from my post
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>That puts all of the text inside the card so that we can grab it to search in our javascript. Speaking of which, here that is:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="s2">"#search-box"</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'keyup'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
	<span class="kd">var</span> <span class="nx">text_to_search</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s1">'text-to-search'</span><span class="p">);</span>

	<span class="nx">$</span><span class="p">(</span><span class="nx">text_to_search</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
  	<span class="nx">$</span><span class="p">(</span><span class="nx">text_to_search</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">show</span><span class="p">();</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">text_to_search</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">html</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">content</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">())</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">$</span><span class="p">(</span><span class="nx">text_to_search</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">hide</span><span class="p">();</span>
		<span class="p">}</span>
	<span class="p">})</span>
<span class="p">});</span></code></pre></figure>

<p>Basically this grabs all the divs with our class name and the text in the search box, shows all the posts with our <code class="highlighter-rouge">.post</code> tag. Then, looping through our list of posts it checks the contents of the post for the text in our search box, and hides the post if it is not found.</p>

<p>And there you have it, a nice simple search to implement for a jekyll based site.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/04/05/Adding-Custom-Search.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/token.jpeg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Markus Spiske from Pexels">
              <div class="card-body">
                <h5 class="card-title text-left">How To Implement Token Based Auth In Flask<br><small class="text-info">Posted: March 28, 2018</small></h5>
                <div class="card-text container">
                  So the other day I talked about <a href="/writing/2018/03/12/Token-Based-Authentication.html">why</a> I chose to used token based authentication for my new service. I thought it would be useful for others to see how I did this, in case you want to as well.


                </div>
                <div hidden>
                  <p>So the other day I talked about <a href="/writing/2018/03/12/Token-Based-Authentication.html">why</a> I chose to used token based authentication for my new service. I thought it would be useful for others to see how I did this, in case you want to as well.</p>

<p>First, it’s necessary to define the database structure that I’ve implemented for the structure. Some things that are specific for my service have been omitted for brevity, but the tables below can be used as a starting point for any other service. Side note, the database that I use is MySQL, and that is what I recommend that most beginners use as it is stable and tested by much larger companies than yours will ever be. The tables are as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE DATABASE service;
USE DATABASE service;

CREATE TABLE IF NOT EXISTS logins (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `username` varchar(30) NOT NULL,
  `password` varchar(64) NOT NULL,
  PRIMARY KEY(`id`),
  UNIQUE KEY (`username`)
);

CREATE TABLE IF NOT EXISTS authentication_tokens (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `user_id` int(10) NOT NULL,
  `token` varchar(64) NOT NULL,
  `last_updated_at` TIMESTAMP DEFAULT NOW(),
  PRIMARY KEY(`id`),
  UNIQUE KEY (`user_id`)
);
</code></pre></div></div>

<p>Now, the above code can actually be copied into a <code class="highlighter-rouge">.sql</code> file, and moved into a MySQL installation by running <code class="highlighter-rouge">mysql -p &lt; filename.sql</code> To briefly describe the database structure, the logins table acts as the main table for the database and the authorized_tokens table only is used to store the tokens as you’ll see shortly. Before we get to the tokens though, I’ll briefly describe how a user gets to added to the logins table.</p>

<p>I won’t be covering any data validation as that would make the post about 100 times longer, but that can easily be added to this method. To avoid storing any plaintext passwords, the passwords are all salted and hashed before being stored, using <a href="https://pypi.python.org/pypi/bcrypt/2.0.0">bcypt</a>. And the package that I use to connect to the MySQL database is MySQLdb. Here’s the user add method, and a simple database wrapper class:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class DB(object):
    def __init__(self):
        self.database = MySQLdb.connect(host="localhost", user="root", passwd=db_password, db="service", cursorclass = MySQLdb.cursors.DictCursor)
        self.cursor = self.database.cursor()

    def close(self):
        self.database.close()

    def read(self, query):
        self.cursor.execute(query)
        data = self.cursor.fetchall()
        return data

    def write(self, query):
        try:
            self.cursor.execute(query)
            self.database.commit()
            return True
        except Exception as e:
            print e
            return False

class User(object):

    def __init__(self):
        self.db_wrapper = DB()
        
    def add(self, username, unhashed_pass, unhashed_pass_conf):
 	hashed = bcrypt.hashpw(str(unhashed_pass), bcrypt.gensalt())
 	query = "INSERT INTO logins (username, password) VALUES ('{}', '{}')".format(username, hashed)
	rc = self.db_wrapper.write(query)
	return rc
</code></pre></div></div>

<p>Now that we have a simple way to add a user, we need to be able to create a token for them. First, to create the token we need to validate that the user has logged in correctly. To do so, we’re going to create a validator class. First, I’ll give the class in full, then walk through the couple of methods. It’s a little long, but it’ll be worth it.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Authentication(object):

    def __init__(self):
        self.db_wrapper = DB()

    def close(self):
        self.db_wrapper.close()

    def generate_token(self, username):
        current_time = time.time()
        token = bcrypt.hashpw(str(username) + str(time.time()), bcrypt.gensalt())
        return token

    def is_authorized(self, username, token):
        user_id = self.get_user_id(username)
        stored_token = self.get_token(user_id)

        if stored_token is None:
            return False
        if stored_token != token:
            return False
        if stored_token == token:
            self.update_token(user_id)
            return True
        return False

    def login(self, username, password):
        user_id = self.get_user_id(username)
        if user_id is None:
            return False

        stored_pass = self.get_hashed_pass(user_id)
        if bcrypt.hashpw(str(password), stored_pass) == stored_pass:
            token = self.get_token(user_id)
            if token is None:
                token = self.generate_token(username)
                self.store_token(user_id, token)
            return True, {'token':token}
        else:
            return False, None

    def logout(self, username):
        user_id = self.get_user_id(username)
        if user_id is None:
            return False
        query = "DELETE FROM authentication_tokens WHERE user_id = {}".format(user_id)
        rc = self.db_wrapper.write(query)
        return rc

    def get_hashed_pass(self, user_id):
        query = "SELECT password FROM logins WHERE id = {}".format(user_id)
        results = self.db_wrapper.read(query)
        if results is None:
            return None
        return results[0]['password']

    def get_token(self, user_id):
        query = "SELECT token FROM authentication_tokens WHERE user_id = {}".format(user_id)
        results = self.db_wrapper.read(query)
        if results is None:
            return None
        try:
            return results[0]['token']
        except:
            return None

    def get_user_id(self, username):
        query = "SELECT id FROM logins WHERE username = '{}'".format(username)
        results = self.db_wrapper.read(query)
        if results is None:
            return None
        return results[0]['id']

    def store_token(self, user_id, token):
        query = "INSERT INTO authentication_tokens (user_id, token) VALUES ({}, '{}')".format(user_id, token)
        rc = self.db_wrapper.write(query)
        return rc

    def update_token(self, user_id):
        query = "UPDATE authentication_tokens SET last_updated_at = NOW() WHERE user_id = {}".format(user_id)
        rc = self.db_wrapper.write(query)
        return rc
</code></pre></div></div>

<p>Okay, like I said it’s a lot, and there’s a bunch of helper methods that are used to modularize the code, but basically it consists of the is_authorized, login, and logout methods.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/03/28/How-To-Implement-Token-Auth-In-Flask.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Thoughts_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/simple.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Grovemade on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Tried And True Technologies<br><small class="text-info">Posted: March 26, 2018</small></h5>
                <div class="card-text container">
                  Among the many things I’ve learned through watching and listening to others in the software development industry, one major thing is the concept of using tried and true technologies. You may be asking yourself what that means. It means specifically using technologies that plenty of other companies use. <a href="https://marco.org">Marco...
                </div>
                <div hidden>
                  <p>Among the many things I’ve learned through watching and listening to others in the software development industry, one major thing is the concept of using tried and true technologies. You may be asking yourself what that means. It means specifically using technologies that plenty of other companies use. <a href="https://marco.org">Marco Arment</a> has said it well many times that you never want to be the biggest user of a technology. The two major reasons for this are related.</p>

<p>First, if you are the largest user of a technology you’re going to run into issues when trying to scale the software past a certain point. Along with that, if you’re the only company on that scale of use for a technology then it is most likely up to you to fix it. Instead of working on improving your product, suddenly you’re spending most of your time just ensuring that your newer technology stack doesn’t fall over.</p>

<p>Now, that doesn’t mean that you have to only write programs for COBAL mainframes, but if you go to start a new project that will most likely get successful and none of the technologies that you plan on using have been around for over a year at minimum, well… Good luck. This post may come along as old fashioned, but I really do believe that you want the big issues to be someone else’s problem.</p>

<p>Basically, most projects involve some type of frontend, some sort of backend with baked in business logic, and some sort of datastore. The frontend could be either a website, mobile app, or desktop software. Since I normally work with websites, I’ll focus on that. With websites, you normally want to use a a javascript framework that has been around for a while to avoid lots of issues that can crop up. You’ll also want to avoid using any newer CSS features to ensure cross-browser compatibility.</p>

<p>Getting to the backend, you probably want to ensure that the language and web framework you’re using has been used before. Common bases are Flask and Django in Python, Ruby on Rails, and Laravel in PHP. Again, nothing exciting, however you don’t always want exciting. I don’t know about you, but I would much rather have a stable technology than a buggy or changing technology.</p>

<p>Finally, on the datastore. In my opinion, if you are using anything other than MySQL you better have a reason that you can back up with facts not blog posts. MySQL has been around practically forever, and is mostly scalable. It has Master-Slave replication built in, which allows scaling up to a point rather easily. Honestly, I recommend starting with MySQL in such a setup. Once your company gets to the point where that is no longer viable, you can simply higher someone to solve the problem for you. So don’t make it a problem when there shouldn’t be one.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/03/26/Tried-And-True-Tech.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Thoughts
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/token.jpeg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Markus Spiske from Pexels">
              <div class="card-body">
                <h5 class="card-title text-left">Token Based Authentication<br><small class="text-info">Posted: March 12, 2018</small></h5>
                <div class="card-text container">
                  For the service that I’m writing, one of the main things that I’m focusing on is the user experience. I want the user to have a good time that’s frustration free throughout using the app. One of those concerns that I’ve thought about is the login experience, and more importantly...
                </div>
                <div hidden>
                  <p>For the service that I’m writing, one of the main things that I’m focusing on is the user experience. I want the user to have a good time that’s frustration free throughout using the app. One of those concerns that I’ve thought about is the login experience, and more importantly how to have someone remain logged in while still being secure.</p>

<p>The way that I went is to implement a token based authentication system. The user will log in and then their browser will be handed a token. With that token, the user has access to do all of their tasks within the application. Originally the token expiration date was a hard limit set at 24 hours after token creation. However I quickly noticed that this could be in issue.</p>

<p>Say for instance that you normally log on to use my service after getting home from work for the day. And say this means that you normally log in around 6pm. So your token is then set to expire at 6pm tomorrow. Now say that you get home a little early the next day and log in at 5:50pm. Great, you think, because you’re already logged in. However, while doing your tasks you then notice that on your first action after 6pm you are suddenly logged out and asked to log back in even though you were just using the service. That seems quite annoying and frustrating right? Well, the simple way to solve this that I saw was to create a soft expiration of 24 hours after last action. What this means is that I make a simple additional database call every time the user completes and action to update the creation date of the key.</p>

<p>While this does mean that the token could theoretically never expire, that risk is worth it to provide a better experience to the users. And if you run your own service, I think that you would agree.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/03/12/Token-Based-Authentication.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/starting_image.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Jon Tyson on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Starting A Service<br><small class="text-info">Posted: March 08, 2018</small></h5>
                <div class="card-text container">
                  Over the coming months I am going to be attempting to launch an online service. No hints as to what it is yet, but I thought it would be a good thought exercise to share with the internet any discoveries or problems that I encounter while going through this. Please...
                </div>
                <div hidden>
                  <p>Over the coming months I am going to be attempting to launch an online service. No hints as to what it is yet, but I thought it would be a good thought exercise to share with the internet any discoveries or problems that I encounter while going through this. Please keep an eye out for new posts in the future.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2018/03/08/Starting-A-Service.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/cryptography.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Markus Spiske on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Visual Guide to AES<br><small class="text-info">Posted: February 26, 2018</small></h5>
                <div class="card-text container">
                  While studying for my first intro to cryptography exam I was looking for
resources to better explain how AES encryptin works, and came along this cute
little drawing that does a remarkable job. Find it
<a href="http://www.moserware.com/2009/09/stick-figure-guide-to-advanced.html">here</a>

                </div>
                <div hidden>
                  <p>While studying for my first intro to cryptography exam I was looking for
resources to better explain how AES encryptin works, and came along this cute
little drawing that does a remarkable job. Find it
<a href="http://www.moserware.com/2009/09/stick-figure-guide-to-advanced.html">here</a></p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2018/02/26/Visual-Guide-AES.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/quick_tip.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by James Pond on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Quick Tip - Remote Database Access in Apache<br><small class="text-info">Posted: February 23, 2018</small></h5>
                <div class="card-text container">
                  While working on my current project I ran into an issue where I was trying to access a database on a remote server within the API that I’m building. While I could access the database from the mysql command line tool, I could not access it within my web application....
                </div>
                <div hidden>
                  <p>While working on my current project I ran into an issue where I was trying to access a database on a remote server within the API that I’m building. While I could access the database from the mysql command line tool, I could not access it within my web application. Finally after lots of searching it appears that the issue was actually a security setting within selinux. To turn this bit of security off just type the below and you’ll be on your way.</p>

<p><code class="highlighter-rouge">setsebool httpd_can_network_connect_db on &amp;&amp; setsebool -P httpd_can_network_connect_db on</code></p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2018/02/23/Quick-Tip-Remote-Servers-in-Apache.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/thoughts.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Ali Yahya on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Should You Learn Server Administration?<br><small class="text-info">Posted: February 17, 2018</small></h5>
                <div class="card-text container">
                  So, I’ve been asked by a few people both at work and school about who should learn server administration. While I am by no means an expert at administrating servers, I do keep a healthy homelab of between fifteen and twenty servers and I help maintain roughly the same amount...
                </div>
                <div hidden>
                  <p>So, I’ve been asked by a few people both at work and school about who should learn server administration. While I am by no means an expert at administrating servers, I do keep a healthy homelab of between fifteen and twenty servers and I help maintain roughly the same amount of servers here at my day job so I do have some basic knowledge. I will try to outline a few people who should look into this, and also a few reasons as to why they should.</p>

<p>The first group of people that may be curious about server administration are those who are looking to either switch careers from something else into server administration or those who are looking to make the jump from help desk, or related, to being an administrator. While being a server administrator is not the easiest role in the world, knowing the basics is certainly doable for the average person interested in technology. The second group of people would be developers looking to launch a website or other online service, maybe a server component for a mobile application or related, and wish to have control over where that will be hosted.</p>

<p>By following the path of becoming a server administrator one will gain a basic understanding of how the internet operates, as each and every website that you visit throughout the day is run by technologies that are roughly the same as what you will be learning. Once you have learned this information yourself, it will be easy for you to apply among any number of uses, whether that be a virtual machine on your laptop or desktop or even on a hosted virtual private server (VPS) hosted at a hosting provider. The only difference between the two are where the machine is located.</p>

<p>For those simply looking to become server administrators, that means that this knowledge will be easily transferrable among any company that you wish to work for. Those developers looking to launch their own site will reap greater benefit as it will allow you to host your site with any hosting provider, so you can jump between them until you find the right mix of price and customer support as you see fit. This lack of provider tie in becomes even more important when the developer realizes that they don’t have to host everything under the sun with AWS. There is nothing wrong with hosting services on AWS, but one can normally save time, money and stress by being able to host their site on any old box that runs linux.</p>

<p>I am continually amazed by the amount of classmates that I talk to that don’t even realize there is another option to hosting a website that isn’t on the platform provided by AWS. They are even more amazed to learn how simply having one load balancer and two web servers behind it sets them up to scale almost infinitely for a time. While there are limitations to that, trust me by the time that you hit them you should easily be making enough money from your site or service that upgrading from that setup can be the problem of someone that you hire.</p>

<p>Considering the above benefits of learning a new skill for career advancement or ease of launching a new project, for anyone even thinking about starting to learn server administration the answer should be a resounding yes. Over the next few days and weeks I’ll be putting together a series of posts that will allow one to begin the path of server administration by starting with a blank VPS and getting to the point of having a secure one page website. Now, what can one do with one page site? They can have it be a simple resume site, or even turn it into a bunch of pages kind of like the blog that you are currently reading. Neat, huh?</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/02/17/Who-Should-Learn-Server-Administration.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Photography_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/made_vs_found.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Cameron Kirby on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Found Vs Made Photography<br><small class="text-info">Posted: February 12, 2018</small></h5>
                <div class="card-text container">
                  There is a common misconception today that photography as an art form is a medium akin to painting or drawing, thus allowing the photographer to share their vision of the world with those who view the work. While it is true that viewing a photo does allow one to see...
                </div>
                <div hidden>
                  <p>There is a common misconception today that photography as an art form is a medium akin to painting or drawing, thus allowing the photographer to share their vision of the world with those who view the work. While it is true that viewing a photo does allow one to see how the world appears to the artist, there is no reason to believe that the artist is creating that world. Considering other mediums of art, using painting as an example, when the artist sets out to capture their subject exactly as how it is seen, the subject can often appear different in the final product. That’s not to say that the artist set out to modify the subject, however it is often unavoidable. For example, when painting a flower, there are a few things that can be changed from reality without the artist noticing. The easiest of these for others to see would be the color of the flower, for even if the artist matches the color they see entirely accurately there is no guarantee that the color is true to how others perceive it. Again, this is not a mistake made by the artist, it is simply the reality of relying on the human eye to accurately detect color.</p>

<p>In contrast, when using a camera with sufficient technology this is impossible as the camera will capture the true color of the object regardless of what it’s operator sees. One of the wonders of photography though is that through the magic of post-processing, either digital or analog, it is possible for the artist to change how the colors or even subjects appear within the photo. This single aspect distinguishes photography as being different as it allows for two different categories of photography to exist, that of the found image and that of the made image.</p>

<p>The found image is often what most photographers start with when they first begin taking photos. A found image is one that represents what the artist saw in front of them at the time of hitting the shutter, but also relies upon the content of the photo having been there before the photographer decided to take the image. Many start here as it is relatively easy to just walk around capturing images of what’s in front of you. That is not to say though, that capturing a good found image is easy; This requires being in the right place at the right time, and for the photographer to have a sense of how the image will look before taking it.</p>

<p>Arguably the most well-known form of found photography is street photography. The image of a photographer walking the streets of a big city and snapping pictures of the interesting things going on around them is a familiar one to anyone that’s paid attention to photography. This is also the style of photography that was common in the mid twentieth century, as it allowed those that lived within New York City to share the wonders of the big city with those in America who didn’t. As the street photographer must act quickly to capture the events unfolding around them, there is little room for them to make the images into something they aren’t.</p>

<p>The other well-known genre of found photography is landscape photography, where exactly as it sounds the photographer goes out and captures the landscape in front of them. This can be anything from a sweeping mountain range to a lush forest or a city off in the distance. It’s with these images though where a beginner photographer may start drifting into made photography. Most people when trying to make their photography better delve into learning how to “post-process” their images. In landscape photography, one may not see it as a big deal to simply make the green of the trees a little greener, or the water in the lake a little blue-er, however by doing so they are manipulating the image to be different from what the naked eye sees.</p>

<p>There is nothing wrong with photographers doing this, it is simply good to note that when doing so a photographer moves from showing his surroundings to showing how he perceives his surroundings. Another slight crossover genre of photography is that of the portrait photographer. While one may start taking photos of those around them in natural light, doing so may lead the photographer to look into using extra light which changes the image. Or a photographer’s client may request that the photographer remove imperfections within the image such as stray hairs or acne, which while helpful to the subject does change the image.</p>

<p>This is not to say that lighting or changing the images in post is the only way to “make” and image. Regarding portrait photography again, there are many things the photographer can change before taking the picture that moves the image towards the made end of the spectrum including having the subject of the photograph go to certain locations, having them wear certain clothes or makeup, or even changing who the subject is. This can then go even further if the photographer chooses to, mostly through post processing. Using Photoshop or one of its many competitors for post processing is what truly allows the photographer to delve into the made photography spectrum, as using these programs allow skilled artists to manipulate the images in almost any way that they choose. This can be anything from changing colors to removing items in the frame to adding items to the frame, all of which allow the artist to show us their view of the world rather than just the world.</p>

<p>Both of found and made photography have their place within the world, and neither is initially better than the other. Without having both, the world of photography would be a much simpler and more boring world, and the art scene would be without some of the major game changers within the medium.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 20 Minutes</span>
                    <a href="/writing/2018/02/12/Found-Vs-Made-Photography.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Photography
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/state_machine.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Igor Ovsyannykov on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Constructing A DFA From A Regex<br><small class="text-info">Posted: February 09, 2018</small></h5>
                <div class="card-text container">
                  While creating <a href="https://doug-skinner.com/projects/2018/02/09/Prex.html">Prex</a>, one of the major challenges was trying to figure out the best way to represent a walkable path through the regular expression without just resorting to the built in regular expression class within Python. After some deliberation, and a failed attempt of trying to keep track...
                </div>
                <div hidden>
                  <p>While creating <a href="https://doug-skinner.com/projects/2018/02/09/Prex.html">Prex</a>,
one of the major challenges was trying to figure out the best way to represent a
walkable path through the regular expression without just resorting to the built in regular
expression class within Python. After some deliberation, and a failed attempt of
trying to keep track of my position walking through the string iteself, I
remembered from my Automata class that a regular expression has to be able to be
represented within a
<a href="https://en.wikipedia.org/wiki/Deterministic_finite_automaton">Deterministic Finite Automaton</a> or it’s
not valid, so I decided to construct one of those. In order to do this, I would
need three classes, one to represent each state of the DFA, one to represent the
actual DFA, and then one to read in the file and the regex string to be
processed. Since the actual code for the project can be found both on my personal GitLab
and Github I won’t be showing the actual code here, just describing the thought
process.</p>

<p>Creating the state representation was relatively simple. It has three
internal variables, one to hold any possible loop variables, one to hold any
possible transition variables, and then one to represent the next state. The
reason for that last variable is to represent the possible states as a linked
list of states, to easily keep track of the beginning and end of the list. In
order to create the DFA from the regex, a blank state is created initially.
Then, for each character a new state is created, the transition variable is set
to the character, and then the previous state’s next state is set to the current
state.</p>

<p>The only exception to this is if the character is +, *, [, or ]. If the
character is a +, which means that the character can appear one or many times,
then a new state is added with a loop variable that matches the previous states
transition variable and the transition variable is set to ‘’. Aside, in this DFA
a transition of ‘’ is treated as a null transition allowing it to be
transitioned across at any time. If the character is a *, which means that the character can be there zero or
any number of times, the previous characters transition variable is moved to the
loop variable, and the transition variable is set to ‘’. This allows it to be
looped infinitely or skipped entirely.</p>

<p>The last part of the construction is if the character is a [. If it is, then a
flag is set indicating that we are currently within brackets. While that flag is
set, all characters encountered are added to the transition variable of the
current state. Once we encounter a ], we turn that flag off and continue. And
thus, the DFA is made and we can start processing the passed in strings.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/02/09/DFA-for-Regex.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Design_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/mushroom_final_phone.png" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Me">
              <div class="card-body">
                <h5 class="card-title text-left">Mushroom Redesign<br><small class="text-info">Posted: January 19, 2018</small></h5>
                <div class="card-text container">
                  While browsing reddit the other day I came upon a <a href="https://www.reddit.com/r/learnpython/comments/7q8qka/i_made_a_rough_draft_of_a_flask_app_that_accepts/">link</a> to a newer Github repo that someone was working on. That repo was <a href="https://github.com/brettvanderwerff/Mushroom-Map-Maker">Mushroom Map Maker</a> and now, mushrooms aren’t normally my thing, however I always like seeing what others are working on so I thought I...
                </div>
                <div hidden>
                  <p>While browsing reddit the other day I came upon a <a href="https://www.reddit.com/r/learnpython/comments/7q8qka/i_made_a_rough_draft_of_a_flask_app_that_accepts/">link</a> to a newer Github repo that someone was working on. That repo was <a href="https://github.com/brettvanderwerff/Mushroom-Map-Maker">Mushroom Map Maker</a> and now, mushrooms aren’t normally my thing, however I always like seeing what others are working on so I thought I would take a look. And functionality was great, the search worked perfectly, and even properly gave errors if the input was missing. The aesthetics of the page however left a little to be desired so I thought I would download it and take a look at what I could do.</p>

<p>The original landing page looked like this:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_starting_image.png" /></p>

<p>So it was obvious that the creater, <a href="https://github.com/brettvanderwerff">brettvanderwerff</a>, was using bootstrap 3 based on the basic jumbotron and navbar. Now, bootstrap 3 is the older version and using bootstrap 4 would be easier, but it shouldn’t be too hard. Before I begin, I should point at that the changes to the actual repo were all done inline to not include another file in the repository, but will be represented below as if there were an actual custom css file.</p>

<p>The first change that I made was to indicate the actual page the user was using on the navbar, as to begin with it only ever had the active class on the “Home” link. This was as simple as adding a page variable to the flask routing that returned the name of the page, and did an if statement for each link to add the class if necessary. No other visual changes yet.</p>

<p>The next thing that I did was to actually remove the standard active class, and implement my own version at first just changing the color of the link text. I also opted to make the background color of the navbar white instead of the default grey-ish. Our custom css file would look like so:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
.active-link {
  color: blue;
}

.navbar-bg {
  background-color: white;
}

</code></pre></div></div>

<p>And the landing page now looked like so:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_new_navbar.png" /></p>

<p>Next, do deal with the actual content of the index page. The content was already within a container, which was good. First I pulled the instructions “Select “Search for a Mushroom” on the navigation bar to begin.” onto the main jumbotron. Then, to stop the page from seeming like it was shouting at you, I lowered the title “The Mushroom Map” to be an h2 instead of an h1. I also used the <code class="highlighter-rouge">&lt;small&gt;</code> tag for the version number within that h2 to apply some built in boot-strappy styling. Separating the heading of that content from the body with an <code class="highlighter-rouge">&lt;hr /&gt;</code> also gives some breathing room.</p>

<p>Finally, taking after the cards that became popular with Google’s Material Design guidelines, I opted to fashion the jumbotron holding the content as a card with a white background with a slight shadow. Our css file now contains:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
.active-link {
  color: blue;
}

.navbar-bg {
  background-color: white;
}

.card {
  background-color: white;
  box-shadow: 1px 3px 5px 3px rgba(204, 204, 204, 0.3);
}

</code></pre></div></div>

<p>And the landing page now appears like so:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_card_index.png" /></p>

<p>Then to soften up the appearance of the links I opted to change the color to a softer shade of blue. Changing the color of the links to be less in your face may seem like a small change, but I’ve repeatedly found that by doings so it makes the page appear more friendly and welcoming.</p>

<p>Our custom file is now:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
.active-link {
  color: blue;
}

.navbar-bg {
  background-color: white;
}

.card {
  background-color: white;
  box-shadow: 1px 3px 5px 3px rgba(204, 204, 204, 0.3);
}

a {
  color: #17a2b8;
}

</code></pre></div></div>

<p>And the landing page now appears like so:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_link_color.png" /></p>

<p>Now switching gears to the actual functionality of the site, the original search page looked like the following:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_original_search.png" /></p>

<p>With the navbar changes that were made before that carried over, and by moving the content into a jumbotron just like before the content now mostly matches the homepage. It’s just a matter of cleaning it up. By making those changes, which doesn’t require a change to the css file, the page looks like so:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_card_search.png" /></p>

<p>While that form is functional, it would appear better to use the form-groups that bootstrap provides to shape the label and the input. The code to do that is:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&lt;div class="form-group"&gt;
  &lt;label for="example"&gt;Example&lt;/label&gt;
  &lt;input class="form-control" name="example" type="text"&gt;
&lt;/div&gt;

</code></pre></div></div>

<p>And now the page looks like:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_form_groups.png" /></p>

<p>Then, to take advantage of larger screens I moved the examples over to a second column. Once the screen got below the bootstrap’s defined medium screen size it then converts to being stacked like how it was. It now appears like so on larger screens:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_two_column.png" /></p>

<p>The original search page did alert the user if they had errors entering when submitting the form, however to make the look of the match the original, I modified them to both be alerts with the danger class. The danger class is a built in Bootstrap element that can be added to most text tags that makes the font color red, and in the case of the alerts also makes the background a lighter shade of red to really emphasize the text. A screenshot of the new change is below:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_alerts.png" /></p>

<p>Next, The example list was modified to be a dictionary list. Like changing the sizes of the card titles, this was done to make the page seem less in your face, while still providing the information. See below for the difference:</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_d_list.png" /></p>

<p>And the last major change was to make the search look better by just adding some padding for mobile. While a minor change, the extra space makes the applications interface flow better.</p>

<p>Our custom file is now:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
.active-link {
  color: blue;
}

.navbar-bg {
  background-color: white;
}

.card {
  background-color: white;
  box-shadow: 1px 3px 5px 3px rgba(204, 204, 204, 0.3);
}

a {
  color: #17a2b8;
}

mobile_padding {
  padding-bottom: 1em;
}

</code></pre></div></div>

<p>And that padding class is applied to the column containing the search form. The final product looks like below, shown in desktop and phone sized screens.</p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_final_desk.png" /></p>

<p><img class="rounded img-fluid shadow" src="/img/post_images/mushroom_final_phone.png" /></p>

<p>Thanks for reading the whole way through, I hoped it helped anyone that made it this far. As always, feel free to send me an email to the address below with any questions or comments.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 15 Minutes</span>
                    <a href="/writing/2018/01/19/Mushroom-Redesign.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Design
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/quick_tip.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by James Pond on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Replacing Characters Within Smarty Templating<br><small class="text-info">Posted: January 18, 2018</small></h5>
                <div class="card-text container">
                  Another quick one, while at work today needed to strip a few characters out of a
string, namely [ and ] as they were causing issues with some other string
manipulation further down the line. All I had to do was turn this:


                </div>
                <div hidden>
                  <p>Another quick one, while at work today needed to strip a few characters out of a
string, namely [ and ] as they were causing issues with some other string
manipulation further down the line. All I had to do was turn this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;{variable}&gt;
</code></pre></div></div>

<p>Into this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;{variable|replace:"[":""|replace:"]":""}&gt;
</code></pre></div></div>

<p>Easy enough, right?</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2018/01/18/Replacing-Characters-Smarty.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Thoughts_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/thoughts.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Ali Yahya on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Some Thoughts About Net Neutrality<br><small class="text-info">Posted: January 17, 2018</small></h5>
                <div class="card-text container">
                  Recently I was asked to answer the below questions as part of the Information
Ethics class that I am taking, and I thought they would stand as a good
representation of my views on Net Neutrality. Enjoy.


                </div>
                <div hidden>
                  <p>Recently I was asked to answer the below questions as part of the Information
Ethics class that I am taking, and I thought they would stand as a good
representation of my views on Net Neutrality. Enjoy.</p>

<hr />

<p><strong>Are you in favor of network neutrality going forward? Why or why not?</strong></p>

<p>I am entirely in favor of net neutrality. To believe anything else would be to go against the very essence of what makes the internet so great. The internet, since it was first invented by Tim Berners Lee, has long been a free for all where anyone can make the next big thing out of their garage. For most of the gian companies that we knwo today, i.e. Apple, Microsoft, Netflix, Facebook, and others, are only as big as they are because they were able to thrive as young companies on the internet.</p>

<p>If the protection that these large companies used, that of every end point on the internet being treated equal, ever goes away it will almost certainly guarantee that competition among little companies will all but evaporate as the already established behemoths can simply pay to wipe them out.</p>

<p><strong>What is the threat of ISPs, private business firms, charging whatever they want to charge and that the market will bear?</strong></p>

<p>By charging whatever they feel like charging to certain businesses the ISPs are trying to make their service what it isn’t. The goal of an INTERNET service provider is to provide service, i.e. access, to the internet. It is most certainly NOT to choose what goes over the internet. The role of the ISP is to act as a dumb pipe, the same way that a sewer does not care whether it carries water, excrement, or food shavings. Allowing an ISP to charge more for certain services would be the exact same as allowing sewage companies to charge more to carry water from your toilet than water from your sink.</p>

<p><strong>What do the FCC and industry critics mean by “discriminatory behavior” towards selected Internet services? Does the FCC want to prevent ISPs from managing their networks?</strong></p>

<p>Discriminatory behavior on behalf of the ISPs would be to charge based on the type of traffic that goes over their network. Since a packet of video is no more damaging to a computer network than a packet of plain text, there is no reason that an ISP should be able to charge more for one than the other. The ISP is perfectly allowed to manage their networks, only so far as they are allowed to continue being a dumb pipe.</p>

<p><strong>Does the FCC support metered pricing and/or Internet bandwidth caps?</strong></p>

<p>Yes, as long as the pricing reflects the usage and is non-discriminatory.</p>

<p><strong>Major cities of the world have adopted “congestion pricing” in which cars pay a toll to enter the core of the city during daylight hours. Congestion pricing is also used to regulate demand by businesses for electricity. During the day when electricity is in high demand, many businesses pay a “demand” fee in addition to the regular charge for electricity. Why is the Internet any different?</strong></p>

<p>Well, the internet is different simply because the demand of the internet can be met much more simply than the demands of electricity. While the electricity of the United States has been regulated so everyone gets the same availability. The same is not true for ISPs. There are still multiple places within this country that have less than a 10mbps line as the fastest internet that they can get. Before the ISPs worry about charging their existings customers more and ruining thousands of internet based businesses, they should focus on actually providing the service they are supposed too to their customers.</p>

<p><strong>If your business model depended for its success on millions of people being able to stream videos on demand (like YouTube) would you be in favor of net neutrality or against it?</strong></p>

<p>In favor of it. If my business model is dependant on as many people accessing it as possible, as most internet companies are, any extra charge per customer could be devestating.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/01/17/Net-Neutrality-Thoughts.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Thoughts
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Thoughts_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/thoughts.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Ali Yahya on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">VPN, A Necessity?<br><small class="text-info">Posted: January 05, 2018</small></h5>
                <div class="card-text container">
                  Is using a VPN a necessecity for all internet users in this day and age? While it may be a bit extreme, I do believe that any internet user that isn’t using a VPN for their daily internet usage to protect their privacy and anonymity. There are many reasons that...
                </div>
                <div hidden>
                  <p>Is using a VPN a necessecity for all internet users in this day and age? While
it may be a bit extreme, I do believe that any internet user that isn’t using a
VPN for their daily internet usage to protect their privacy and anonymity. There
are many reasons that an internet user should care about their privacy,
especially with the recent proposed change by the United States FCC.</p>

<p>While Internet Service Providers(ISPs) within the United States will soon be
able to charge users more depending on what softwares you actually use within
your billing period, none of that matters if you can’t be tracked. When using a
VPN, the only traffic that your ISP will be able to see and intercept will be to
the domain that hosts your VPN of choice. So while getting to Netflix may cost
you $0.02 a Mb, made up purely for this example but not out of the realms of
possibiity, if standard internet traffic only costs you $0.01 a Mb going through
the VPN which will appear as standard traffic lowers the costs that you will be
facing by half.</p>

<p>Another big use of VPNs is to provide the same functionality of hiding your
traffic from others that may be looking to snoop it on the same network. This is
especially a problem on public WiFi that you may find in hotels, coffee shops,
and increasingly other public areas, as anyone that is on the same network as
you has the ability to see all traffic on this network. Another common issue
that standard internet users may encounter is fake public networks, such as a
mailicious individual that broadcasts an accesible network with the name “Free
Starbucks WiFi” from a computer that they own. Many internet users may connect
to the WiFi without a second thought, but through using a VPN to browse the
internet the malicious individual will not be able to easily see the traffic
that is being generated nor its intended destination.</p>

<p>While these aren’t the only reasons that someone should use a VPN, they are
among the most popular. I do encourage everyone that comes across this post to
seriously evaluate for themselves whether they need a VPN. As to what company to
use for your VPN, that is a matter that I will not step into, instead advising
each person to evaluate the various options on their own.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2018/01/05/VPN-Necessity.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Thoughts
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/quick_tip.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by James Pond on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Fixing Mysql Replication<br><small class="text-info">Posted: January 02, 2018</small></h5>
                <div class="card-text container">
                  Quick one. If you have a master and slave MySQL setup, if the slaves are
reporting replication failures BUT have a status that is simply waiting for the
next command, simply restarting MySQl should fix the issue. Sometimes a simple
restart is the answer.

                </div>
                <div hidden>
                  <p>Quick one. If you have a master and slave MySQL setup, if the slaves are
reporting replication failures BUT have a status that is simply waiting for the
next command, simply restarting MySQl should fix the issue. Sometimes a simple
restart is the answer.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2018/01/02/Fixing-Mysql_Replication.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Thoughts_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/new_year.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Brooke Lark on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">New Year<br><small class="text-info">Posted: January 01, 2018</small></h5>
                <div class="card-text container">
                  Another year, another chance to make declarations about the goals that one hopes to accomplish in the next 365 days. Writing down goals, especially in a semi public place such as the internet, is one of the major steps to take in ensuring that those goals actually succeed. Well, this...
                </div>
                <div hidden>
                  <p>Another year, another chance to make declarations about the goals that one hopes
to accomplish in the next 365 days. Writing down goals, especially in a semi
public place such as the internet, is one of the major steps to take in ensuring
that those goals actually succeed. Well, this is mine, in no particular order.</p>

<ul>
  <li>Post here on this blog a major post at least once a week.</li>
  <li>Release a new project or big update for a project every month.</li>
  <li>Post a picture that I’m proud of every week.</li>
</ul>

<p>By the end of this month I should be able to see if all of these goals actually
come to fruition, and will make any adjustments as needed.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 2 Minutes</span>
                    <a href="/writing/2018/01/01/New-Year.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Thoughts
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Building a Shell, Part 8<br><small class="text-info">Posted: December 09, 2017</small></h5>
                <div class="card-text container">
                  Today while testing I had noticed a slight issue with the code. While everything worked great in the directory where we started the simpleshell, the complicated functions failed as soon as we stepped outside of the directory using our chwd command. A simple fix to that just involves looking at...
                </div>
                <div hidden>
                  <p>Today while testing I had noticed a slight issue with the code. While everything
worked great in the directory where we started the simpleshell, the complicated
functions failed as soon as we stepped outside of the directory using our chwd
command. A simple fix to that just involves looking at the current directory
when we start up, and pre-pending it to the command name. Adding that to our
shell we get:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">base_dir</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">);</span>
    <span class="n">getcwd</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="n">MAX_STR</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">_continue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">buff</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">);</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[Command prompt]$ "</span><span class="p">);</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">);</span> <span class="c1">// uses the getLine from yesterdays post.</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">token</span><span class="p">;</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"quit"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_continue</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"wd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">wd</span><span class="p">();</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"chwd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="kt">char</span> <span class="o">*</span><span class="n">new_path</span><span class="p">;</span>
            <span class="n">new_path</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">chwd</span><span class="p">(</span><span class="n">new_path</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">pid_t</span> <span class="n">child</span><span class="p">,</span> <span class="n">wait</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">child_status</span><span class="p">;</span>

            <span class="n">child</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">execl</span><span class="p">(</span><span class="s">"/bin/echo"</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">,</span> <span class="s">"Hello World!"</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"create"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">command_path</span><span class="p">;</span>
                      <span class="n">allocateStr</span><span class="p">(</span><span class="o">&amp;</span><span class="n">command_path</span><span class="p">);</span>
                      <span class="n">strcat</span><span class="p">(</span><span class="n">command_path</span><span class="p">,</span> <span class="n">base_dir</span><span class="p">);</span>
                      <span class="n">strcat</span><span class="p">(</span><span class="n">command_path</span><span class="p">,</span> <span class="s">"/create"</span><span class="p">);</span>

                      <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">op2</span>  <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="n">execl</span><span class="p">(</span><span class="s">"./create"</span><span class="p">,</span> <span class="s">"create"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"list"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">command_path</span><span class="p">;</span>
                    <span class="n">allocateStr</span><span class="p">(</span><span class="o">&amp;</span><span class="n">command_path</span><span class="p">);</span>
                    <span class="n">strcat</span><span class="p">(</span><span class="n">command_path</span><span class="p">,</span> <span class="n">base_dir</span><span class="p">);</span>
                    <span class="n">strcat</span><span class="p">(</span><span class="n">command_path</span><span class="p">,</span> <span class="s">"/list"</span><span class="p">);</span>

                    <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="n">execl</span><span class="p">(</span><span class="n">command_path</span><span class="p">,</span> <span class="s">"list"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"fileconverter"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">command_path</span><span class="p">;</span>
                    <span class="n">allocateStr</span><span class="p">(</span><span class="o">&amp;</span><span class="n">command_path</span><span class="p">);</span>
                    <span class="n">strcat</span><span class="p">(</span><span class="n">command_path</span><span class="p">,</span> <span class="n">base_dir</span><span class="p">);</span>
                    <span class="n">strcat</span><span class="p">(</span><span class="n">command_path</span><span class="p">,</span> <span class="s">"/fileconverter"</span><span class="p">);</span>

                    <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">op2</span>  <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="n">execl</span><span class="p">(</span><span class="n">command_path</span><span class="p">,</span> <span class="s">"fileconverter"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">printf</span><span class="p">(</span><span class="s">"The command you entered does not exist.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">do</span> <span class="p">{</span>
                    <span class="n">wait</span> <span class="o">=</span> <span class="n">waitpid</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">child_status</span><span class="p">,</span> <span class="n">WUNTRACED</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">WIFEXITED</span><span class="p">(</span><span class="n">child_status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">WIFSIGNALED</span><span class="p">(</span><span class="n">child_status</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">free</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">_continue</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/12/09/Building-A-Shell-pt-8.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Building a Shell, Part 7<br><small class="text-info">Posted: December 08, 2017</small></h5>
                <div class="card-text container">
                  Today we’re going to be adding the third and final (for now) of our more complex functions to our shell, fileconverter. This command was specific to my class “Make a shell” assignment, but the functionality can definitely be improved upon for other use cases as well. The file takes in...
                </div>
                <div hidden>
                  <p>Today we’re going to be adding the third and final (for now) of our more complex functions to our
shell, fileconverter. This command was specific to my class “Make a shell” assignment, but the
functionality can definitely be improved upon for other use cases as well. The file takes in a
regular text file and converts it to a binary file, or vice versa, and looks like this:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include "error.h"
#include "helper.h"
#include "input.h"
#include &lt;fcntl.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">argc</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"The fileconverter must be called as fileconverter flag infile [outfile]</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Make sure the string is null terminated</span>
    <span class="c1">//argv[3][strlen(argv[3])-1] = 0;</span>

    <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">infile</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span> <span class="s">"-t"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp_in</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="s">"r"</span><span class="p">);</span>
        <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp_out</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s">"wb"</span><span class="p">);</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">line</span><span class="p">;</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">fp_in</span><span class="p">);</span>

        <span class="k">while</span> <span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

            <span class="kt">char</span> <span class="o">*</span><span class="n">firstname</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
            <span class="kt">char</span> <span class="o">*</span><span class="n">lastname</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
            <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">GPA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

            <span class="n">sscanf</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="s">"%s %s %d %f"</span><span class="p">,</span> <span class="n">firstname</span><span class="p">,</span> <span class="n">lastname</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GPA</span><span class="p">);</span>

            <span class="kt">int</span> <span class="n">first_len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">firstname</span><span class="p">);</span>
            <span class="kt">int</span> <span class="n">last_len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">lastname</span><span class="p">);</span>

            <span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">first_len</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp_out</span><span class="p">);</span>
            <span class="n">fwrite</span><span class="p">(</span><span class="n">firstname</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">),</span> <span class="n">first_len</span><span class="p">,</span> <span class="n">fp_out</span><span class="p">);</span>
            <span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">last_len</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp_out</span><span class="p">);</span>
            <span class="n">fwrite</span><span class="p">(</span><span class="n">lastname</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">),</span> <span class="n">last_len</span><span class="p">,</span> <span class="n">fp_out</span><span class="p">);</span>
            <span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">id</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp_out</span><span class="p">);</span>
            <span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">GPA</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp_out</span><span class="p">);</span>

            <span class="n">line</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">fp_in</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">fclose</span><span class="p">(</span><span class="n">fp_in</span><span class="p">);</span>
        <span class="n">fclose</span><span class="p">(</span><span class="n">fp_out</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span> <span class="s">"-b"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp_in</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="s">"rb"</span><span class="p">);</span>
        <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp_out</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s">"w"</span><span class="p">);</span>

        <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">char</span> <span class="o">*</span><span class="n">firstname</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
            <span class="kt">char</span> <span class="o">*</span><span class="n">lastname</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
            <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="kt">float</span> <span class="n">GPA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">first_len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">last_len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">first_len</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp_in</span><span class="p">);</span>
            <span class="n">fread</span><span class="p">(</span><span class="n">firstname</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">),</span> <span class="n">first_len</span><span class="p">,</span> <span class="n">fp_in</span><span class="p">);</span>
            <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">last_len</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp_in</span><span class="p">);</span>
            <span class="n">fread</span><span class="p">(</span><span class="n">lastname</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">),</span> <span class="n">last_len</span><span class="p">,</span> <span class="n">fp_in</span><span class="p">);</span>
            <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">id</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp_in</span><span class="p">);</span>
            <span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">GPA</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fp_in</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">feof</span><span class="p">(</span><span class="n">fp_in</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">fprintf</span><span class="p">(</span><span class="n">fp_out</span><span class="p">,</span> <span class="s">"%s %s %d %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">firstname</span><span class="p">,</span> <span class="n">lastname</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">GPA</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">fclose</span><span class="p">(</span><span class="n">fp_in</span><span class="p">);</span>
        <span class="n">fclose</span><span class="p">(</span><span class="n">fp_out</span><span class="p">);</span>
    <span class="p">}</span>  <span class="k">else</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"that is not an allowed flag."</span><span class="p">);</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>


</code></pre></div></div>
<p>Adding this functionality is relatively simple following the example function
that we gave yesterday, and just consists of adding another string comparison to
see if if matches the <code class="highlighter-rouge">fileconverter</code> function. Then we just get the required
arguments, and pass it using <code class="highlighter-rouge">execl</code> again.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">_continue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">buff</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">);</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[Command prompt]$ "</span><span class="p">);</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">);</span> <span class="c1">// uses the getLine from yesterdays post.</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">token</span><span class="p">;</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"quit"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_continue</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"wd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">wd</span><span class="p">();</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"chwd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="kt">char</span> <span class="o">*</span><span class="n">new_path</span><span class="p">;</span>
            <span class="n">new_path</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">chwd</span><span class="p">(</span><span class="n">new_path</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">pid_t</span> <span class="n">child</span><span class="p">,</span> <span class="n">wait</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">child_status</span><span class="p">;</span>

            <span class="n">child</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">execl</span><span class="p">(</span><span class="s">"/bin/echo"</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">,</span> <span class="s">"Hello World!"</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"create"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">op2</span>  <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="n">execl</span><span class="p">(</span><span class="s">"./create"</span><span class="p">,</span> <span class="s">"create"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"list"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="n">execl</span><span class="p">(</span><span class="s">"./list"</span><span class="p">,</span> <span class="s">"list"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"fileconverter"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">op2</span>  <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="n">execl</span><span class="p">(</span><span class="s">"./fileconverter"</span><span class="p">,</span> <span class="s">"fileconverter"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">printf</span><span class="p">(</span><span class="s">"The command you entered does not exist.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">do</span> <span class="p">{</span>
                    <span class="n">wait</span> <span class="o">=</span> <span class="n">waitpid</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">child_status</span><span class="p">,</span> <span class="n">WUNTRACED</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">WIFEXITED</span><span class="p">(</span><span class="n">child_status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">WIFSIGNALED</span><span class="p">(</span><span class="n">child_status</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">free</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">_continue</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/12/08/Building-A-Shell-pt-7.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Building a Shell, Part 6<br><small class="text-info">Posted: December 07, 2017</small></h5>
                <div class="card-text container">
                  Today we’re going to be adding the second of our more complex functions to our
shell, list. This command will be a simplistic version of the ls command. The code mostly relies upon using a few system calls that
makes this functionality easy to implement, and looks like this:


                </div>
                <div hidden>
                  <p>Today we’re going to be adding the second of our more complex functions to our
shell, list. This command will be a simplistic version of the ls command. The code mostly relies upon using a few system calls that
makes this functionality easy to implement, and looks like this:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;dirent.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">pathname</span> <span class="o">=</span> <span class="s">"."</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">token</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"-i"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>  <span class="o">||</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"-h"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="n">pathname</span> <span class="o">=</span> <span class="s">"."</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"-i</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"-h</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="n">pathname</span> <span class="o">=</span> <span class="s">"."</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
            <span class="n">pathname</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">pathname</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Too many command line args specified. Run list --help for more"</span><span class="p">);</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">flag</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//list current dir</span>
        <span class="kt">DIR</span> <span class="o">*</span><span class="n">d</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">dirent</span> <span class="o">*</span><span class="n">dir</span><span class="p">;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">opendir</span><span class="p">(</span><span class="n">pathname</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">((</span><span class="n">dir</span> <span class="o">=</span> <span class="n">readdir</span><span class="p">(</span><span class="n">d</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">'.'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">printf</span><span class="p">(</span><span class="s">"Filename: %s </span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">closedir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span> <span class="s">"-i"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">DIR</span> <span class="o">*</span><span class="n">d</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">dirent</span> <span class="o">*</span><span class="n">dir</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">stat</span> <span class="n">buf</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">stats</span><span class="p">;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">opendir</span><span class="p">(</span><span class="n">pathname</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">((</span><span class="n">dir</span> <span class="o">=</span> <span class="n">readdir</span><span class="p">(</span><span class="n">d</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">stat</span><span class="p">(</span><span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">);</span>
                <span class="n">stats</span> <span class="o">=</span> <span class="n">buf</span><span class="p">.</span><span class="n">st_mode</span>  <span class="o">&amp;</span> <span class="p">(</span><span class="n">S_IRWXU</span> <span class="o">|</span> <span class="n">S_IRWXG</span> <span class="o">|</span> <span class="n">S_IRWXO</span><span class="p">);</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">"Filename: %s Size: %d(bytes) iNode#: %llu Permissions: %o</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">,</span><span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_reclen</span><span class="p">,</span><span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_ino</span><span class="p">,</span><span class="n">stats</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">closedir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">flag</span><span class="p">,</span> <span class="s">"-h"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">DIR</span> <span class="o">*</span><span class="n">d</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">dirent</span> <span class="o">*</span><span class="n">dir</span><span class="p">;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">opendir</span><span class="p">(</span><span class="n">pathname</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">((</span><span class="n">dir</span> <span class="o">=</span> <span class="n">readdir</span><span class="p">(</span><span class="n">d</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'.'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">printf</span><span class="p">(</span><span class="s">" %s </span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">dir</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">closedir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="s">"--help"</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"The options to call this command are as follows:"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">list </span><span class="se">\t</span><span class="s"> list all non-hidden files in current working directory"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">list -i</span><span class="se">\t</span><span class="s"> list additional info for files in current working directory"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">list -h</span><span class="se">\t</span><span class="s"> list hidden files in current working directory"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">list pathname</span><span class="se">\t</span><span class="s"> list all non-hidden files in specified directory"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">list -i pathname</span><span class="se">\t</span><span class="s"> list additional info for files in specified directory"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">list -h pathname</span><span class="se">\t</span><span class="s"> list hidden files in specified directory"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"The flags entered were not valid. Type --help for help</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>
<p>Adding this functionality is relatively simple following the example function
that we gave yesterday, and just consists of adding another string comparison to
see if if matches the <code class="highlighter-rouge">list</code> function. Then we just get the required
arguments, and pass it using <code class="highlighter-rouge">execl</code> again.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">_continue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">buff</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">);</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[Command prompt]$ "</span><span class="p">);</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">);</span> <span class="c1">// uses the getLine from yesterdays post.</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">token</span><span class="p">;</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"quit"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_continue</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"wd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">wd</span><span class="p">();</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"chwd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="kt">char</span> <span class="o">*</span><span class="n">new_path</span><span class="p">;</span>
            <span class="n">new_path</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">chwd</span><span class="p">(</span><span class="n">new_path</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">pid_t</span> <span class="n">child</span><span class="p">,</span> <span class="n">wait</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">child_status</span><span class="p">;</span>

            <span class="n">child</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">execl</span><span class="p">(</span><span class="s">"/bin/echo"</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">,</span> <span class="s">"Hello World!"</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"create"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">op2</span>  <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="n">execl</span><span class="p">(</span><span class="s">"./create"</span><span class="p">,</span> <span class="s">"create"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"list"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                    <span class="n">execl</span><span class="p">(</span><span class="s">"./list"</span><span class="p">,</span> <span class="s">"list"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">printf</span><span class="p">(</span><span class="s">"The command you entered does not exist.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">do</span> <span class="p">{</span>
                    <span class="n">wait</span> <span class="o">=</span> <span class="n">waitpid</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">child_status</span><span class="p">,</span> <span class="n">WUNTRACED</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">WIFEXITED</span><span class="p">(</span><span class="n">child_status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">WIFSIGNALED</span><span class="p">(</span><span class="n">child_status</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">free</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">_continue</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/12/07/Building-A-Shell-pt-6.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Building a Shell, Part 5<br><small class="text-info">Posted: December 06, 2017</small></h5>
                <div class="card-text container">
                  Today we’re going to be adding the first of our more complex functions to our shell, create. This command will be used to create files, directories, and both hard and soft links. The file permissions will be 0640 for the files and 0750 for the directories. The code mostly relies...
                </div>
                <div hidden>
                  <p>Today we’re going to be adding the first of our more complex functions to our
shell, create. This command will be used to create files, directories, and both
hard and soft links. The file permissions will be 0640 for the files and 0750
for the directories. The code mostly relies upon using a few system calls that
makes this functionality easy to implement, and looks like this:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include "error.h"
#include &lt;fcntl.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"There needs to be at least three command line args. Run create --help for more</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="s">"-f"</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Make sure the string is nul terminated</span>
        <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">GUARD</span><span class="p">(</span><span class="n">creat</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mo">0640</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="s">"-d"</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Make sure the string is nul terminated</span>
        <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">GUARD</span><span class="p">(</span><span class="n">mkdir</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mo">0750</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="s">"-h"</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"There needs to be at least four command line args to create links"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">// Make sure the string is nul terminated</span>
        <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">GUARD</span><span class="p">(</span><span class="n">link</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]));</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="s">"-s"</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"There needs to be at least four command line args to create links"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">GUARD</span><span class="p">(</span><span class="n">symlink</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]));</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="s">"--help"</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"The options to call this command are as follows:"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">create -f filename</span><span class="se">\t</span><span class="s"> creates a new file"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">create -d directory</span><span class="se">\t</span><span class="s"> creates a new directory"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">create -h old_file new_file</span><span class="se">\t</span><span class="s"> create a hard link"</span><span class="p">);</span>
        <span class="n">puts</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">create -s old_file new_file</span><span class="se">\t</span><span class="s"> create a soft link"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"The flags entered were not valid</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>
<p>Adding this functionality is relatively simple following the example function
that we gave yesterday, and just consists of adding another string comparison to
see if if matches the <code class="highlighter-rouge">create</code> function. Then we just get the required
arguments, and pass it using <code class="highlighter-rouge">execl</code> again.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">_continue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">buff</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">);</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[Command prompt]$ "</span><span class="p">);</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">);</span> <span class="c1">// uses the getLine from yesterdays post.</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">token</span><span class="p">;</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"quit"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_continue</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"wd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">wd</span><span class="p">();</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"chwd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="kt">char</span> <span class="o">*</span><span class="n">new_path</span><span class="p">;</span>
            <span class="n">new_path</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">chwd</span><span class="p">(</span><span class="n">new_path</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">pid_t</span> <span class="n">child</span><span class="p">,</span> <span class="n">wait</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">child_status</span><span class="p">;</span>

            <span class="n">child</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">execl</span><span class="p">(</span><span class="s">"/bin/echo"</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">,</span> <span class="s">"Hello World!"</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"create"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">flag</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">op1</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="kt">char</span> <span class="o">*</span><span class="n">op2</span>  <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" "</span><span class="p">);</span>
                      <span class="n">execl</span><span class="p">(</span><span class="s">"./create"</span><span class="p">,</span> <span class="s">"create"</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">printf</span><span class="p">(</span><span class="s">"The command you entered does not exist.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">do</span> <span class="p">{</span>
                    <span class="n">wait</span> <span class="o">=</span> <span class="n">waitpid</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">child_status</span><span class="p">,</span> <span class="n">WUNTRACED</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">WIFEXITED</span><span class="p">(</span><span class="n">child_status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">WIFSIGNALED</span><span class="p">(</span><span class="n">child_status</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">free</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">_continue</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/12/06/Building-A-Shell-pt-5.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Building a Shell, Part 4<br><small class="text-info">Posted: December 05, 2017</small></h5>
                <div class="card-text container">
                  Now, we’re going to focus on how we would add more complex functions to the shell. While you can simply keep declaring them as singular functions, when the built in functionality gets more complex, think listing all files in a directory, it becomes easier to break each piece of functionality...
                </div>
                <div hidden>
                  <p>Now, we’re going to focus on how we would add more complex functions to the
shell. While you can simply keep declaring them as singular functions, when the
built in functionality gets more complex, think listing all files in a
directory, it becomes easier to break each piece of functionality out into it’s
own .c file, compile it as part of the build process, and then execute it from
our shell.</p>

<p>Executing these functions is the perfect use of our child processes, as you
don’t want to clog up the main process performing complex work. The way that you
can execute arbitrary commands from within our shell is through the <a href="http://www.geeksforgeeks.org/exec-family-of-functions-in-c/">exec
family</a> of
functions. While that link goes into further detail about the various options,
the one that we’ll be focusing on is the following:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">execl</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">arg0</span><span class="p">,</span> <span class="p">...</span> <span class="cm">/*, (char *)0 */</span><span class="p">);</span>

<span class="c1">// An example of this command</span>
<span class="n">execl</span><span class="p">(</span><span class="s">"path to command"</span><span class="p">,</span> <span class="s">"command name"</span><span class="p">,</span> <span class="s">"arg1"</span><span class="p">,</span> <span class="s">"arg2"</span><span class="p">,</span> <span class="p">...</span> <span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

<span class="c1">// And an actual example</span>
<span class="n">execl</span><span class="p">(</span><span class="s">"/bin/echo"</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">,</span> <span class="s">"Hello World!"</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</code></pre></div></div>

<p>If we actually ran the code above, our shell would launch the echo command in
the background, pass in the two command line args, in this case the name of the
program and what we want to be echoe’d, and then it would process. In this case
the output would be the string Hello World! While this may seem like a trivial
example, it is in fact very powerful as it allows us to add pretty much any
functions that we want. We’ll dive into a few of those functions tomorrow, but
for now I’ll just add the echo command to our shell. I’ll also add an error
string if the entered command doesn’t exist.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">_continue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">buff</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">);</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[Command prompt]$ "</span><span class="p">);</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">);</span> <span class="c1">// uses the getLine from yesterdays post.</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">token</span><span class="p">;</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"quit"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_continue</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"wd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">wd</span><span class="p">();</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"chwd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="kt">char</span> <span class="o">*</span><span class="n">new_path</span><span class="p">;</span>
            <span class="n">new_path</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">chwd</span><span class="p">(</span><span class="n">new_path</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">pid_t</span> <span class="n">child</span><span class="p">,</span> <span class="n">wait</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">child_status</span><span class="p">;</span>

            <span class="n">child</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">execl</span><span class="p">(</span><span class="s">"/bin/echo"</span><span class="p">,</span> <span class="s">"echo"</span><span class="p">,</span> <span class="s">"Hello World!"</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">printf</span><span class="p">(</span><span class="s">"The command you entered does not exist.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
                    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">do</span> <span class="p">{</span>
                    <span class="n">wait</span> <span class="o">=</span> <span class="n">waitpid</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">child_status</span><span class="p">,</span> <span class="n">WUNTRACED</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">WIFEXITED</span><span class="p">(</span><span class="n">child_status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">WIFSIGNALED</span><span class="p">(</span><span class="n">child_status</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">free</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">_continue</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/12/05/Building-A-Shell-pt-4.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Building a Shell, Part 3<br><small class="text-info">Posted: December 04, 2017</small></h5>
                <div class="card-text container">
                  Next, we’ll add a few built in functions to the shell. Our shell will support printing the current directory, changing the current directory, and quitting as built in commands. We’ll also be giving the shell the ability to run some external commands in the next section of this series. The...
                </div>
                <div hidden>
                  <p>Next, we’ll add a few built in functions to the shell. Our shell will support
printing the current directory, changing the current directory, and quitting as
built in commands. We’ll also be giving the shell the ability to run some
external commands in the next section of this series. The code for each of these
commands is simple, and the quit command was already included last time. So, the
code for printing the current directory:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">wd</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">current_dir</span><span class="p">;</span>
    <span class="n">allocateStr</span><span class="p">(</span><span class="o">&amp;</span><span class="n">current_dir</span><span class="p">);</span>
    <span class="n">GUARD_PTR</span><span class="p">(</span><span class="n">getcwd</span><span class="p">(</span><span class="n">current_dir</span><span class="p">,</span> <span class="n">MAX_STR</span><span class="p">));</span>
    <span class="n">puts</span><span class="p">(</span><span class="n">current_dir</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>And the code for changing the directory:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">chwd</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">new_path</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">new_path</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"The proper usage of %s is %s.</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="s">"chwd"</span><span class="p">,</span> <span class="s">"chwd pathname"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">GUARD</span><span class="p">(</span><span class="n">chdir</span><span class="p">(</span><span class="n">new_path</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The functions will then be added to the shell like so:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">_continue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">buff</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">);</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[Command prompt]$ "</span><span class="p">);</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">);</span> <span class="c1">// uses the getLine from yesterdays post.</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">token</span><span class="p">;</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"quit"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_continue</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"wd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">wd</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"chwd"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">char</span> <span class="o">*</span><span class="n">new_path</span><span class="p">;</span>
            <span class="n">new_path</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">chwd</span><span class="p">(</span><span class="n">new_path</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">pid_t</span> <span class="n">child</span><span class="p">,</span> <span class="n">wait</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">child_status</span><span class="p">;</span>

            <span class="n">child</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">puts</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
                <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">do</span> <span class="p">{</span>
                    <span class="n">wait</span> <span class="o">=</span> <span class="n">waitpid</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">child_status</span><span class="p">,</span> <span class="n">WUNTRACED</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">WIFEXITED</span><span class="p">(</span><span class="n">child_status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">WIFSIGNALED</span><span class="p">(</span><span class="n">child_status</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">free</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">_continue</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>These functions give our shell the beginning of usefullness, and will be
expanded upon tomorrow.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/12/04/Building-A-Shell-pt-3.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Building a Shell, Part 2<br><small class="text-info">Posted: December 03, 2017</small></h5>
                <div class="card-text container">
                  This is the second section in a series of posts walking through the steps I took to make a basic shell for a final project for a systems programming class. The only thing that we’ll be adding to the shell today is probably the most important aspect of the shell,...
                </div>
                <div hidden>
                  <p>This is the second section in a series of posts walking through the steps I took
to make a basic shell for a final project for a systems programming class. The
only thing that we’ll be adding to the
shell today is probably the most important aspect of the shell, the fact that
all of the actions that it does are run in background processes, and the main or
parent process only is responsible for getting input, passing it to the process,
and then getting whatever the process returns. In C, processes are created
through the <a href="https://linux.die.net/man/2/fork">fork</a> system call, and contain an exact
copy of the parent processes memory. This is unfortunately not the place to go
into in depth detail of processes, and that will occur a different day. For now,
an example that runs the printing of the input in a child process, and gets the
input in a parent process would look like so:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">_continue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">buff</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">);</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"[Command prompt]$ "</span><span class="p">);</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">getLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">);</span> <span class="c1">// uses the getLine from yesterdays post.</span>

        <span class="kt">char</span> <span class="o">*</span><span class="n">token</span><span class="p">;</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">strtok</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="s">" </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s">"quit"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_continue</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">pid_t</span> <span class="n">child</span><span class="p">,</span> <span class="n">wait</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">child_status</span><span class="p">;</span>

            <span class="n">child</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">puts</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
                <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">do</span> <span class="p">{</span>
                    <span class="n">wait</span> <span class="o">=</span> <span class="n">waitpid</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">child_status</span><span class="p">,</span> <span class="n">WUNTRACED</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">WIFEXITED</span><span class="p">(</span><span class="n">child_status</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">WIFSIGNALED</span><span class="p">(</span><span class="n">child_status</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">free</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">_continue</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/12/03/Building-A-Shell-pt-2.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Building a Shell, Part 1<br><small class="text-info">Posted: December 02, 2017</small></h5>
                <div class="card-text container">
                  This series of posts will walk through the basics of building a shell, based on bash, in the C programming language. This is the final project for a systems programming class that I am taking, and I think tracking my progress here will be beneficial for me to look back...
                </div>
                <div hidden>
                  <p>This series of posts will walk through the basics of building a shell, based on
bash, in the C programming language. This is the final project for a systems
programming class that I am taking, and I think tracking my progress here will
be beneficial for me to look back on later.</p>

<p>To start out, the first major thing that a shell does is read in input from the
user, in order to parse it to make commands. So, the first thing that we’re
going to do is write a function to read in a line from standard input, stopping
at the first newline encountered. An example of a function that does this could
be the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>char *getLine(FILE* stream) {
    char *line;
    line = malloc(sizeof(char) * 256); // 256 being a decent size for an input string
    char *buff;
    buff = malloc(sizeof(char) * 1);
    int index = 0;

    while (fgets(buff, 2, stream) != NULL) {
        if (*buff == '\n') {
            line[index] = *buff;
            break;
        } else {
            line[index] = *buff;
            index++;
        }
    }

    return line;
}
</code></pre></div></div>

<p>Then continuing on with the rest of the shell, we need a basic function that
loops through, getting input and doing something with it. This could be a
function as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int loop(void) {

    while (1) {
        // Prompt the user for input with your shell
        printf("[my_shell]$ ");

        char *line;
        line = malloc(sizeof(char) * 256); // 256 being the size we declared in the other function

        line = getLine(stdin);

        puts(line);
    }

    return 0;
}
</code></pre></div></div>

<p>The above function would currently loop forever, simply prompting for input and
printing that same input back to the user. Tomorrow during the next section of
this series, we’ll cover the fact that all of the commands in a shell are run in
a background process, and how to actually do that.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/12/02/Building-A-Shell-pt-1.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Reading_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/reading.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Rendiansyah Nugroho on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Weekend Reading 7<br><small class="text-info">Posted: December 02, 2017</small></h5>
                <div class="card-text container">
                  Weekend reading part seven, <a href="https://brennan.io/2015/01/16/write-a-shell-in-c/">Tutorial, Write a shell in C</a>, was read before attempting to complete the task, building a basic shell, for one of my classes. I’ll be going through this task in a series of posts over the next couple of days, in order to track my...
                </div>
                <div hidden>
                  <p>Weekend reading part seven, <a href="https://brennan.io/2015/01/16/write-a-shell-in-c/">Tutorial, Write a shell in
C</a>, was read before
attempting to complete the task, building a basic shell, for one of my classes.
I’ll be going through this task in a series of posts over the next couple of
days, in order to track my progress with it.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2017/12/02/Weekend-Reading-6.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Reading
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Reading_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/reading.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Rendiansyah Nugroho on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Weekend Reading 6<br><small class="text-info">Posted: November 19, 2017</small></h5>
                <div class="card-text container">
                  Weekend reading part six, <a href="https://www.smashingmagazine.com/2016/12/mistakes-developers-make-when-learning-design/">Design for Developers</a> , is a must read for any developer that feels like their design is somewhat lacking, but doesn’t know where to start in order to resolve the issue. It walks you through where to go from where you are, and was helpful...
                </div>
                <div hidden>
                  <p>Weekend reading part six, <a href="https://www.smashingmagazine.com/2016/12/mistakes-developers-make-when-learning-design/">Design for Developers</a>
, is a must read for any developer that feels like their
design is somewhat lacking, but doesn’t know where to
start in order to resolve the issue. It walks you through
where to go from where you are, and was helpful in my
design journey.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2017/11/19/Weekend-Reading-6.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Reading
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Reading_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/reading.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Rendiansyah Nugroho on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Weekend Reading 5<br><small class="text-info">Posted: November 19, 2017</small></h5>
                <div class="card-text container">
                  Weekend reading part five, <a href="http://tom.preston-werner.com/2009/05/19/the-git-parable.html">The Git Parable</a>
, is a must read for any modern developer, as it allows a much deeper understanding of git by walking through what may have been the thoughts of the creators of Git.

                </div>
                <div hidden>
                  <p>Weekend reading part five, <a href="http://tom.preston-werner.com/2009/05/19/the-git-parable.html">The Git Parable</a>
, is a must read for any modern developer, as it allows a much deeper understanding of git by walking through what may have been the thoughts of the creators of Git.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2017/11/19/Weekend-Reading-5.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Reading
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Reading_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/reading.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Rendiansyah Nugroho on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Weekend Reading 4<br><small class="text-info">Posted: November 05, 2017</small></h5>
                <div class="card-text container">
                  Weekend reading part four, <a href="http://www.aaronsw.com/weblog/usefultransparency">When Is Transparency Useful</a> , takes a different turn from the past few readings. It’s an essay by the late Aaron Swartz that explores why transparency in the government is a nice goal to have, but also explains why it may not do what those...
                </div>
                <div hidden>
                  <p>Weekend reading part four, <a href="http://www.aaronsw.com/weblog/usefultransparency">When Is Transparency
Useful</a>
, takes a different turn from the past few readings. It’s an essay by the late
Aaron Swartz that explores why transparency in the government is a nice goal to
have, but also explains why it may not do what those who push for it believe
that it will.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2017/11/05/Weekend-Reading-4.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Reading
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Reading_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/reading.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Rendiansyah Nugroho on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Weekend Reading 3<br><small class="text-info">Posted: October 29, 2017</small></h5>
                <div class="card-text container">
                  Weekend reading part three, <a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">Things You Should Never
Do</a>.
Something a little different this week, exploring a blog post by Joel Spolsky on
the worst thing that a software firm can do.

                </div>
                <div hidden>
                  <p>Weekend reading part three, <a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">Things You Should Never
Do</a>.
Something a little different this week, exploring a blog post by Joel Spolsky on
the worst thing that a software firm can do.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2017/10/29/Weekend-Reading-3.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Reading
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Reading_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/reading.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Rendiansyah Nugroho on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Weekend Reading 2<br><small class="text-info">Posted: October 22, 2017</small></h5>
                <div class="card-text container">
                  Weekend reading part two, <a href="/uploads/writing_larger_programs.pdf">Writing Larger
Programs</a>
, is the second in a weekly series of postings about
topics that I enjoyed reading about followed by a short commentary.


                </div>
                <div hidden>
                  <p>Weekend reading part two, <a href="/uploads/writing_larger_programs.pdf">Writing Larger
Programs</a>
, is the second in a weekly series of postings about
topics that I enjoyed reading about followed by a short commentary.</p>

<p>This week the focus is on larger programs in C, and how to manage them
efficiently.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2017/10/22/Weekend-Reading-2.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Reading
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Thoughts_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/thoughts.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Ali Yahya on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Guerilla Open Access Manifesto<br><small class="text-info">Posted: October 16, 2017</small></h5>
                <div class="card-text container">
                  The following was orginally written by a group of librarians located within
Italy in 2008. It was published by Aaron Swartz on his blog, and was one of the
main things that was being held against him in the prosecution over downloading
JSTOR articles.


                </div>
                <div hidden>
                  <p>The following was orginally written by a group of librarians located within
Italy in 2008. It was published by Aaron Swartz on his blog, and was one of the
main things that was being held against him in the prosecution over downloading
JSTOR articles.</p>

<p>The main goal of the manifesto is to provoke those with access to information
that is with-held from the greater public to take the information and share it
to those without access. This relates to the previous article about Thomas
Jefferson, as it once again is a demonstration that information should be free.
By posting this article, I acknowledge that I am sharing my agreement with the
contents. And I also acknowledge that that agreement may be held against me by
future employers and others. So be it. Information wants to be free, and free it
shall be.</p>

<h4 class="text-center">Guerilla Open Access Manifesto</h4>

<p>Information is power. But like all power, there are those who want to keep it
for
themselves. The world’s entire scientific and cultural heritage, published
over centuries
in books and journals, is increasingly being digitized and locked up by a
handful of
private corporations. Want to read the papers featuring the most famous
results of the
sciences? You’ll need to send enormous amounts to publishers like Reed
Elsevier.</p>

<p>There are those struggling to change this. The Open Access Movement has
fought
valiantly to ensure that scientists do not sign their copyrights away but
instead ensure
their work is published on the Internet, under terms that allow anyone to
access it. But
even under the best scenarios, their work will only apply to things
published in the future.
Everything up until now will have been lost.</p>

<p>That is too high a price to pay. Forcing academics to pay money to read the
work of their
colleagues? Scanning entire libraries but only allowing the folks at Google
to read them?
Providing scientific articles to those at elite universities in the First
World, but not to
children in the Global South? It’s outrageous and unacceptable.</p>

<p>“I agree,” many say, “but what can we do? The companies hold the copyrights,
they
make enormous amounts of money by charging for access, and it’s perfectly
legal —
there’s nothing we can do to stop them.” But there is something we can,
something that’s
already being done: we can fight back.</p>

<p>Those with access to these resources — students, librarians, scientists —
you have been
given a privilege. You get to feed at this banquet of knowledge while the
rest of the world
is locked out. But you need not — indeed, morally, you cannot — keep this
privilege for
yourselves. You have a duty to share it with the world. And you have:
trading passwords
with colleagues, filling download requests for friends.</p>

<p>Meanwhile, those who have been locked out are not standing idly by. You have
been
sneaking through holes and climbing over fences, liberating the information
locked up by
the publishers and sharing them with your friends.</p>

<p>But all of this action goes on in the dark, hidden underground. It’s called
stealing or
piracy, as if sharing a wealth of knowledge were the moral equivalent of
plundering a
ship and murdering its crew. But sharing isn’t immoral — it’s a moral
imperative. Only
those blinded by greed would refuse to let a friend make a copy.</p>

<p>Large corporations, of course, are blinded by greed. The laws under which
they operate
require it — their shareholders would revolt at anything less. And the
politicians they
have bought off back them, passing laws giving them the exclusive power to
decide who
can make copies.</p>

<p>There is no justice in following unjust laws. It’s time to come into the
light and, in the
grand tradition of civil disobedience, declare our opposition to this
private theft of public
culture.</p>

<p>We need to take information, wherever it is stored, make our copies and
share them with
the world. We need to take stuff that’s out of copyright and add it to the
archive. We need
to buy secret databases and put them on the Web. We need to download
scientific
journals and upload them to file sharing networks. We need to fight for
Guerilla Open
Access.</p>

<p>With enough of us, around the world, we’ll not just send a strong message
opposing the
privatization of knowledge — we’ll make it a thing of the past. Will you
join us?</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/10/16/Guerilla-Open-Access-Manifesto.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Thoughts
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Reading_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/reading.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Rendiansyah Nugroho on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Weekend Reading 1<br><small class="text-info">Posted: October 15, 2017</small></h5>
                <div class="card-text container">
                  Weekend reading part one, <a href="/uploads/recursive_make_considered_harmful.pdf">Recursive Make Considered
Harmful</a>
, is the first in a weekly series of postings about
topics that I enjoyed reading about followed by a short commentary.


                </div>
                <div hidden>
                  <p>Weekend reading part one, <a href="/uploads/recursive_make_considered_harmful.pdf">Recursive Make Considered
Harmful</a>
, is the first in a weekly series of postings about
topics that I enjoyed reading about followed by a short commentary.</p>

<p>This week we delve into the topic of efficient makefiles, and why using a
recursive make build is detrimental to most projects. I’ll be using this for the
two libraries that I’ll be working on shortly, and might look to implement it in
some open source libraries I’ve been thinking of implementing.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2017/10/15/Weekend-Reading-1.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Reading
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Thoughts_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/thoughts.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Ali Yahya on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left">Progressive Views Not So<br><small class="text-info">Posted: October 12, 2017</small></h5>
                <div class="card-text container">
                  Thomas Jefferson, the third president of the United States, once wrote a <a href="http://press-pubs.uchicago.edu/founders/documents/a1_8_8s12.html">letter</a> to his friend Isaac McPherson regarding the state of intellectual freedom within the United States at the time. Jefferson’s views would be considered progressive today, yet invoke lots of thought when read with the context of...
                </div>
                <div hidden>
                  <p>Thomas Jefferson, the third president of the United States,
once wrote a
<a href="http://press-pubs.uchicago.edu/founders/documents/a1_8_8s12.html">letter</a>
to his friend Isaac McPherson regarding the state
of intellectual freedom within the United States at the time. Jefferson’s views
would be considered progressive today, yet invoke lots of thought when read with
the context of when he was alive.</p>

<p>Jefferson’s thoughts, while comprehensive can be summed up as follows:</p>

<ul>
  <li>By their very nature, ideas cannot be property.</li>
  <li>The government has no duty to make laws about them.</li>
  <li>The laws that we do make are far from successful.</li>
</ul>

<p>Thomas Jefferson was very for the concept of ideas being a fact of nature, and
just like all other facets of nature ideas want to be free. A simple example of
this is if person A has an idea. Now, this person can never tell anyone of their
idea thus keeping it “safe”. However, once they decide to share that idea with
person B that idea can be their own no more. Why? Well, even if person B agrees,
through a legal document or otherwise, that they will never use the information
contained within the idea and that they will never base a new idea off of the
previous one, it is basically impossible to follow through with that promise.
Once someone hears about and understands an idea then that idea will be with
them forever.</p>

<p>That is one of the great parts of sharing ideas, that all future inventions are
founded on the ideas that came before. A simple example of this is how many
fewer technologies we would have today if everyone that wanted to program a
website or mobile phone app had to re-invent the convention of electricity or
build their own computer factory. You may be laughing, but that is how many
industries try to treat technology, but more on that another time.</p>

<p>Why should the government not make laws about ideas? Simply because they refuse
to acknowledge that ideas cannot both be shared and property. Going back to last
post, the whole concept of property is zero sum, i.e. in order for something to
be property it must be lost to one owner if it is moved to another. This simply
is not the case when it comes to ideas, or as the government insists on calling
them intellectual property. If you tell me how to make a piece of software, such
as how to make a button look a certain way on a website, then we both have this
knowledge. You don’t suddenly lose the knowledge of how to do it after I learn
how to. Thus ideas are not property.</p>

<p>Finally, even if ideas were to be considered property, the laws that the
government makes are far from successful due to a few factors. The first being
that the punishments are far from just. Like how there’s a sliding scale in how
long prison sentences are based on the crimme, there needs to be a sliding scale
in the way that we punish these “criminals”. If we try to insist that the person
that physically robs a store at gun point and the person that clicks download on
a website deserve equal sentences then we are destined to fail especially
considering the second is essentially a crime without a victim. Secondly, it is
unfair to equivocate the effects that these laws have on the various types of
intellectual property. Under the current laws, the punishment is the same
whether you are copying Amazon’s
<a href="https://en.wikipedia.org/wiki/1-Click">one-click</a> patent or a simple catchy
tune from a commercial advertisement. It doesn’t take much thought to
acknowledge that these two should probably be treated differently.</p>

<p>It’s fascinating to me that thinking along these lines is today associated with
dumb youngsters who are used to downloading everything online, when this line of
thinking have been with us for hundreds of years.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: 5 Minutes</span>
                    <a href="/writing/2017/10/12/Progressive-Thoughts-Not-So.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Thoughts
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <div class="All_tag Development_tag post text-to-search">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:20em;" src="/img/post_images/quick_tip.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by James Pond on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-left"># of Users Logged In<br><small class="text-info">Posted: September 15, 2017</small></h5>
                <div class="card-text container">
                  While going through the Unix Systems Programming book, one of the preface
questions asked to devise a one line command to list the number of users
currently logged in to my system. Here’s how to do that.


                </div>
                <div hidden>
                  <p>While going through the Unix Systems Programming book, one of the preface
questions asked to devise a one line command to list the number of users
currently logged in to my system. Here’s how to do that.</p>

<p>My first instict was to go to the man pages, and then quickly found out that
the man pages don’t really help if you don’t know the name of the program you’re
looking at. So I then looked in my /bin/ directory, which contained about 25
various system utilities.</p>

<p>However nothing in there looked useful. I then checked in the /usr/bin directory,
which contained something called <code class="highlighter-rouge">users</code>. Now, we might be getting somewhere.
Looking at the <a href="https://linux.die.net/man/1/users">man page</a> for the command, it
looks like this is exactly what we want. So we simply need to run a command like
so: <code class="highlighter-rouge">users | wc -w</code> which counts the number of words that are output by the
users command, where each word is the name of a logged in user. Problem solved.</p>

                </div>
                <div class="card-footer">
                  <span>Reading Time: <1 Minute</span>
                    <a href="/writing/2017/09/15/Listing-Users.html">
                    <button class="btn btn-info float-right">Read More</button>
                  </a>
                  <br>
                  <div class="tags float-left">
                    <span>Tags:
                    
                      Development
                    
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
    </div>
  </div>
</div>

      </div>
      <div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-10 col-md-8 col-lg-6 mx-auto text-center">
        <p>© Doug Skinner. All rights reserved</p>
      </div>
    </div>
  </div>
</div>

    </div>
  </body>
</html>
