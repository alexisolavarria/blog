<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
  <!-- My Font -->
  <link href="https://fonts.googleapis.com/css?family=Work+Sans" rel="stylesheet">
  <!-- Your custom styles -->
  <link href="/static/css/custom.css" rel="stylesheet">

  <title>Doug Skinner</title>
  <link rel="shortcut icon" href="/img/favicon.ico" />

  <!-- SCRIPTS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
  <!-- My custom javascript-->
  <script type="text/javascript" src="/static/js/custom.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-97386400-1', 'auto');
      ga('send', 'pageview');
  </script>
</head>

  <body>
    <div class="d-md-none">
      <div class="">
  <nav class="navbar fixed-top navbar-light bg-white">
    <a class="navbar-brand" href="#">Doug Skinner</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#myNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
  	<div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav ml-auto float-right">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about.html">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/photos.html">Photos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/projects.html">Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/writings.html">Writings</a>
        </li>
      </ul>
    </div>
  </nav>
</div>

    </div>
    <div class="container" style="padding-top:5em;">
      <div class="container">
        <div class="row">
          <div class="d-none d-md-block col-md-5 col-lg-3">
            <div class="hero">
  <div class="text-center" style="margin-top:3em;">
      <a href="/about.html">
        <img class="img-responsive shadow" style="height:200px;width:200px;border-radius:50%;" src="/img/photos/other/me.jpg">
      </a>
      <div class="content">
        <a href="/index.html"><h3>Doug Skinner<br><small><a href="mailto:me@doug-skinner.com">contact</a></small></h3></a>
        <ul class="list-unstyled">
          <li><a href="/projects.html"><h5>Programmer</h5></a></li>
          <hr />
          <li><a href="/photos.html"><h5>Photography Enthusiast</h5></a></li>
          <hr />
          <li><a href="/writings.html"><h5>Wannabe Blogger</h5></a></li>
        </ul>
      </div>
  </div>
</div>

          </div>
          <div class="col-xs-12 col-md-7 col-lg-9">
            <div class="row">
              <div class="col-12">
                <div class="card shadow">
                  <div class="card-body">
                    <a href="/writing/2017/12/02/Building-A-Shell-pt-1.html">
                      <h3 class="text-center card-title">Building a Shell, Part 1</h3>
                    </a>
                    <hr />
                    <p class="lead card-text"><p>This series of posts will walk through the basics of building a shell, based on
bash, in the C programming language. This is the final project for a systems
programming class that I am taking, and I think tracking my progress here will
be beneficial for me to look back on later.</p>

<p>To start out, the first major thing that a shell does is read in input from the
user, in order to parse it to make commands. So, the first thing that we’re
going to do is write a function to read in a line from standard input, stopping
at the first newline encountered. An example of a function that does this could
be the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>char *getLine(FILE* stream) {
    char *line;
    line = malloc(sizeof(char) * 256); // 256 being a decent size for an input string
    char *buff;
    buff = malloc(sizeof(char) * 1);
    int index = 0;

    while (fgets(buff, 2, stream) != NULL) {
        if (*buff == '\n') {
            line[index] = *buff;
            break;
        } else {
            line[index] = *buff;
            index++;
        }
    }

    return line;
}
</code></pre></div></div>

<p>Then continuing on with the rest of the shell, we need a basic function that
loops through, getting input and doing something with it. This could be a
function as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int loop(void) {
    
    while (1) {
        // Prompt the user for input with your shell
        printf("[my_shell]$ ");

        char *line;
        line = malloc(sizeof(char) * 256); // 256 being the size we declared in the other function

        line = getLine(stdin);

        puts(line);
    }

    return 0;
}
</code></pre></div></div>

<p>The above function would currently loop forever, simply prompting for input and
printing that same input back to the user. Tomorrow during the next section of
this series, we’ll cover the fact that all of the commands in a shell are run in
a background process, and how to actually do that.</p>
</p>
                  </div>
                  <div class="card-footer">
                    <a class="btn btn-outline-primary" href="/writings.html"> Archives </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
