<html>
  <head>
  <meta charset="utf-8">
  <meta lang="en">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Doug Skinner</title>
  <link rel="shortcut icon" href="/img/favicon.ico" />

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link href="/static/css/custom.css" rel="stylesheet">
  <link href="/assets/main.css" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="/static/js/custom.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-97386400-1', 'auto');
      ga('send', 'pageview');
  </script>
</head>

  <body>
    <div id="wrapper">
      <div class="hero">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-10 col-lg-8 col-xl-6 mx-auto">
        <h1 class="display-4 text-center">Doug Skinner</h1>
        <h1 class="display-5 text-center">Programmer, Photographer, Writer</h1>
      </div>
    </div>
  </div>
</div>

      <nav class="navbar fixed-top navbar-expand-md navbar-light bg-light">
  <a class="navbar-brand" href="/">DS</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto text-center">
      <li class="nav-item">
        <button id="mode_toggle" class="btn btn-light" data-mode="light">Light Mode</button>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto text-center">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about.html">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/photos.html">Photos</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/projects.html">Projects</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/writings.html">Writings</a>
      </li>
    </ul>
  </div>
</nav>

      <div class="container">
        <div class="row mobile_padding content">
          <div class="col-12 mobile_padding">
            <div class="card shadow">
              <img class="card-img-top" style="max-height:15em;" src="/img/post_images/shell.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Clever Visuals on Unsplash">
              <div class="card-body">
                <h5 class="card-title text-center">Building a Shell, Part 1<br><small class="text-info">Posted: December 02, 2017</small></h5>
                <div class="card-text col-10 mx-auto">
                  <p>This series of posts will walk through the basics of building a shell, based on
bash, in the C programming language. This is the final project for a systems
programming class that I am taking at UAlbany, and I think tracking my progress here will
be beneficial for me to look back on later. This can also serve as a guide for
fellow albany students that have to do the same thing in the future.</p>

<p>To start out, the first major thing that a shell does is read in input from the
user, in order to parse it to make commands. So, the first thing that we’re
going to do is write a function to read in a line from standard input, stopping
at the first newline encountered. An example of a function that does this could
be the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>char *getLine(FILE* stream) {
    char *line;
    line = malloc(sizeof(char) * 256); // 256 being a decent size for an input string
    char *buff;
    buff = malloc(sizeof(char) * 1);
    int index = 0;

    while (fgets(buff, 2, stream) != NULL) {
        if (*buff == '\n') {
            line[index] = *buff;
            break;
        } else {
            line[index] = *buff;
            index++;
        }
    }

    return line;
}
</code></pre></div></div>

<p>Then continuing on with the rest of the shell, we need a basic function that
loops through, getting input and doing something with it. This could be a
function as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int loop(void) {

    while (1) {
        // Prompt the user for input with your shell
        printf("[my_shell]$ ");

        char *line;
        line = malloc(sizeof(char) * 256); // 256 being the size we declared in the other function

        line = getLine(stdin);

        puts(line);
    }

    return 0;
}
</code></pre></div></div>

<p>The above function would currently loop forever, simply prompting for input and
printing that same input back to the user. Tomorrow during the next section of
this series, we’ll cover the fact that all of the commands in a shell are run in
a background process, and how to actually do that.</p>

                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-10 col-md-8 col-lg-6 mx-auto text-center">
        <p>© Doug Skinner. All rights reserved</p>
      </div>
    </div>
  </div>
</div>

    </div>
  </body>
</html>
