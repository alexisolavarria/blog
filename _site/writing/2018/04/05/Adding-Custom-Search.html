<html>
  <head>
  <meta charset="utf-8">
  <meta lang="en">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Doug Skinner</title>
  <link rel="shortcut icon" href="/img/favicon.ico" />

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link href="/static/css/custom.css" rel="stylesheet">
  <link href="/assets/main.css" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="/static/js/custom.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-97386400-1', 'auto');
      ga('send', 'pageview');
  </script>
</head>

  <body>
    <div class="hero">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-10 col-lg-8 col-xl-6 mx-auto">
        <h1 class="display-4 text-center">Doug Skinner</h1>
        <h1 class="display-5 text-center">Programmer, Photographer, Writer</h1>
      </div>
    </div>
  </div>
</div>

    <nav class="navbar fixed-top navbar-expand-md navbar-light bg-light">
  <a class="navbar-brand" href="/">DS</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto text-center">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about.html">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/photos.html">Photos</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/projects.html">Projects</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/writings.html">Writings</a>
      </li>
    </ul>
  </div>
</nav>

    <div class="container">
      <div class="row mobile_padding content">
        <div class="col-12 mobile_padding">
          <div class="card shadow">
            <img class="card-img-top" style="max-height:15em;" src="/img/post_images/cryptography.jpg" alt="placeholder" data-toggle="tooltip" data-placement="top" title="Photo by Markus Spiske on Unsplash">
            <div class="card-body">
              <h5 class="card-title text-center">Adding Custom Search To Your Site<br><small class="text-info">Posted: April 05, 2018</small></h5>
              <div class="card-text col-10 mx-auto">
                <p>So this week I decided to add a search form to my writings page, as I was getting pretty tired of scrolling through all of my posts to find certain things, and I thought that it would be interesting to share. To make the following work on your own site, it will be easiest if you are using the same technologies that I am Bootstrap, JQuery, and Jekyll. The instructions can be modified for other tech, but that’s something that you’ll have to figure out.</p>

<p>To start, we need to first add a search form. The code that does this, ripped straight from my site, is the following:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"search"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form&gt;</span>
     <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-9"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"search-box"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Search Term Here"</span><span class="nt">&gt;</span>
	    <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-3"</span><span class="nt">&gt;</span>
	    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-outline-success"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>Search<span class="nt">&lt;/button&gt;</span>
	    <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/div&gt;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Notice that the button has a type of button, which means that it does not work to submit the form. In all honesty, the button is useless but makes the search bar look better in my opinion. Next we have the css to just add some padding to our search bar:</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.search</span> <span class="p">{</span>
  <span class="nl">padding-bottom</span><span class="p">:</span> <span class="m">1em</span><span class="p">;</span>
  <span class="nl">padding-right</span><span class="p">:</span> <span class="m">1em</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Very simple, but helps keep the search bar from touching either the edge of the browser on mobile or the top of the first post. The next bit is two parts inside your listing of all posts. The first is to add a class to each card, in my case <code class="highlighter-rouge">.text-to-search</code>, and then having the following snippet somewhere in the card:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">hidden</span><span class="nt">&gt;</span>
  {.{ post.content }} // Without the dot, but otherwise Jekyll eats it from my post
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>That puts all of the text inside the card so that we can grab it to search in our javascript. Speaking of which, here that is:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="s2">"#search-box"</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'keyup'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
	<span class="kd">var</span> <span class="nx">text_to_search</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s1">'text-to-search'</span><span class="p">);</span>

	<span class="nx">$</span><span class="p">(</span><span class="nx">text_to_search</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
  	<span class="nx">$</span><span class="p">(</span><span class="nx">text_to_search</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">show</span><span class="p">();</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">text_to_search</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">html</span><span class="p">().</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">content</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">())</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">$</span><span class="p">(</span><span class="nx">text_to_search</span><span class="p">[</span><span class="nx">index</span><span class="p">]).</span><span class="nx">hide</span><span class="p">();</span>
		<span class="p">}</span>
	<span class="p">})</span>
<span class="p">});</span></code></pre></figure>

<p>Basically this grabs all the divs with our class name and the text in the search box, shows all the posts with our <code class="highlighter-rouge">.post</code> tag. Then, looping through our list of posts it checks the contents of the post for the text in our search box, and hides the post if it is not found.</p>

<p>And there you have it, a nice simple search to implement for a jekyll based site.</p>

              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-10 col-md-8 col-lg-6 mx-auto text-center">
        <p>© Doug Skinner. All rights reserved</p>
      </div>
    </div>
  </div>
</div>

  </body>
</html>
